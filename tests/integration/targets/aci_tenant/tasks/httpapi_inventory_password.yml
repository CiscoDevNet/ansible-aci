##TEST CONNECTION

## If credentials in the inventory are used. Remove session_key from inventory ##

## Active Host (PASS)
# Run on single active Host at task level using credentials
# Run on single active Host at task level using certificate
# Run on single active Host at task level using credentials
# Run on single active Host in inventory using credentials
# Run on single active Host at task level using credentials
# Run on single active Host at task level using certificate
# Run on single active Host in inventory using credentials
# Run on single active Host at task level using certificate

## Inactive Host (FAIL use ignore errors)
# Run on single active Host at task level using credentials
# Run on single active Host at task level using certificate
# Run on single active Host at task level using credentials
# Run on single active Host in inventory using credentials
# Run on single active Host at task level using credentials
# Run on single active Host at task level using certificate
# Run on single active Host at task level using credentials
# Run on single active Host in inventory using credentials

## First Host is Active (PASS on First Host)
# Run on multiple Hosts at task level using credentials
# Run on multiple Hosts at task level using certificate
# Run on multiple Hosts at task level using credentials
# Run on multiple Hosts in inventory using credentials
# Run on multiple Hosts at task level using credentials
# Run on multiple Hosts at task level using certificate
# Run on multiple Hosts at task level using credentials
# Run on multiple Hosts in inventory using credentials

## Second Host is Active (PASS on Second Host)
# Run on multiple Hosts at task level using credentials
# Run on multiple Hosts at task level using certificate
# Run on multiple Hosts at task level using credentials
# Run on multiple Hosts in inventory using credentials
# Run on multiple Hosts at task level using credentials
# Run on multiple Hosts at task level using certificate
# Run on multiple Hosts at task level using credentials
# Run on multiple Hosts in inventory using credentials

## Last Host is Active (PASS on last Host)
# Run on multiple Hosts at task level using credentials
# Run on multiple Hosts at task level using certificate
# Run on multiple Hosts at task level using credentials
# Run on multiple Hosts in inventory using credentials
# Run on multiple Hosts at task level using credentials
# Run on multiple Hosts at task level using certificate
# Run on multiple Hosts at task level using credentials
# Run on multiple Hosts in inventory using credentials

## None of the Hosts are Active (FAIL use ignore errors)
# Run on multiple Hosts at task level using credentials
# Run on multiple Hosts at task level using certificate
# Run on multiple Hosts at task level using credentials
# Run on multiple Hosts in inventory using credentials
# Run on multiple Hosts at task level using credentials
# Run on multiple Hosts at task level using certificate
# Run on multiple Hosts at task level using credentials
# Run on multiple Hosts in inventory using credentials

# NOTE - ansible.builtin.add_host is only used for testing!!! ansible_host variable needs to be absent in the inventory while using ansible.builtin.add_host
#      - If you set same variable names across the playbook to tasks and inventory, the precedence changes where the higher precedence is given to the inventory and not vars set by set_fact. We make sure that the variable names are different.

     # Setup Environment ##
     - name: Set vars
       set_fact: 
        aci_info_single_host_active: &aci_info_single_host_active
          host: 173.36.219.72
          username: "{{ aci_username }}"
          password: "{{ aci_password }}"
          validate_certs: '{{ validate_certs | default(false) }}'
          use_ssl: '{{ use_ssl | default(true) }}'
          timeout: 5
          output_level: debug

     - name: Set vars
       set_fact: 
        aci_info_single_host_active_certificate: &aci_info_single_host_active_certificate
          host: 173.36.219.72
          username: "{{ aci_username }}"
          validate_certs: '{{ validate_certs | default(false) }}'
          use_ssl: '{{ use_ssl | default(true) }}'
          timeout: 5
          output_level: debug

     - name: Add a tenant using an XML string
       cisco.aci.aci_rest:
          <<: *aci_info_single_host_active
          path: /api/mo/uni.xml
          method: post
          content: '<fvTenant name="Sales" descr="Sales departement"/>'
       ignore_errors: yes

     - name: Add user certificate
       cisco.aci.aci_aaa_user_certificate: 
        <<: *aci_info_single_host_active
        aaa_user: "{{ ansible_user }}"
        name: admin
        certificate: "{{ lookup('file', 'certs/admin.crt') }}"
        state: present

    ## Plugin Tests using password from inventory (Part1) ##
     
     - name: Set Single active host in inventory 
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 173.36.219.72
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"
        output_level: debug
     
     - name: Delete Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_single_active_host_1

     - name: Add Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_single_active_host_1

     - name: Add a new AP on single active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_single_active_host_1

     - name: Delete Tenant on single active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_single_active_host_2

     - name: Add Tenant on single active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_single_active_host_2

     - name: Add a new AP on single active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_single_active_host_2

     - name: Delete Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_single_active_host_3

     - name: Add Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_single_active_host_3

     - name: Add a new AP on single active host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_single_active_host_3

     - name: Delete Tenant on single active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_single_active_host_4

     - name: Add Tenant on single active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_single_active_host_4

     - name: Add a new AP on single active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_single_active_host_4

     - name: Delete Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_single_active_host_5

     - name: Add Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_single_active_host_5

     - name: Add a new AP on single active host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_single_active_host_5

     - name: Delete Tenant on single active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_single_active_host_6

     - name: Add Tenant on single active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_single_active_host_6

     - name: Add a new AP on single active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_single_active_host_6

     - name: Delete Tenant on single active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_single_active_host_7

     - name: Add Tenant on single active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_single_active_host_7

     - name: Add a new AP on single active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_single_active_host_7

     - name: Delete Tenant on single active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_single_active_host_8

     - name: Add Tenant on single active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_single_active_host_8

     - name: Add a new AP on single active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_single_active_host_8

     - name: Verify operations on single active host
       assert:
         that:
         - task_pwd_delete_tenant_single_active_host_1.current == []
         - task_pwd_delete_tenant_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_single_active_host_1 is changed
         - task_pwd_add_tenant_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_single_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_pwd_add_ap_single_active_host_1 is changed
         - task_pwd_add_ap_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_ap_single_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_cert_delete_tenant_single_active_host_2 is changed
         - task_cert_delete_tenant_single_active_host_2.current == []
         - task_cert_delete_tenant_single_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_single_active_host_2 is changed
         - task_cert_add_tenant_single_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_single_active_host_2.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_cert_add_ap_single_active_host_2 is changed
         - task_cert_add_ap_single_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_ap_single_active_host_2.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_pwd_delete_tenant_single_active_host_3 is changed
         - task_pwd_delete_tenant_single_active_host_3.current == []
         - task_pwd_delete_tenant_single_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_single_active_host_3 is changed
         - task_pwd_add_tenant_single_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_single_active_host_3.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_pwd_add_ap_single_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_ap_single_active_host_3 is changed
         - task_pwd_add_ap_single_active_host_3.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - inventory_pwd_delete_tenant_single_active_host_4 is changed
         - inventory_pwd_delete_tenant_single_active_host_4.current == []
         - inventory_pwd_delete_tenant_single_active_host_4.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_add_tenant_single_active_host_4 is changed
         - inventory_pwd_add_tenant_single_active_host_4.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_add_tenant_single_active_host_4.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - inventory_pwd_add_ap_single_active_host_4 is changed
         - inventory_pwd_add_ap_single_active_host_4.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_add_ap_single_active_host_4.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_pwd_delete_tenant_single_active_host_5 is changed
         - task_pwd_delete_tenant_single_active_host_5.current == []
         - task_pwd_delete_tenant_single_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_single_active_host_5 is changed
         - task_pwd_add_tenant_single_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_single_active_host_5.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_pwd_add_ap_single_active_host_5 is changed
         - task_pwd_add_ap_single_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_ap_single_active_host_5.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_cert_delete_tenant_single_active_host_6 is changed
         - task_cert_delete_tenant_single_active_host_6.current == []
         - task_cert_delete_tenant_single_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_single_active_host_6 is changed
         - task_cert_add_tenant_single_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_single_active_host_6.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_cert_add_ap_single_active_host_6 is changed
         - task_cert_add_ap_single_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_ap_single_active_host_6.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - inventory_pwd_delete_tenant_single_active_host_7 is changed
         - inventory_pwd_delete_tenant_single_active_host_7.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_delete_tenant_single_active_host_7.current == []
         - inventory_pwd_add_tenant_single_active_host_7 is changed
         - inventory_pwd_add_tenant_single_active_host_7.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_add_tenant_single_active_host_7.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - inventory_pwd_add_ap_single_active_host_7 is changed
         - inventory_pwd_add_ap_single_active_host_7.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_add_ap_single_active_host_7.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_cert_delete_tenant_single_active_host_8 is changed
         - task_cert_delete_tenant_single_active_host_8.current == []
         - task_cert_delete_tenant_single_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_single_active_host_8 is changed
         - task_cert_add_tenant_single_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_single_active_host_8.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_cert_add_ap_single_active_host_8 is changed
         - task_cert_add_ap_single_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_ap_single_active_host_8.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         

######################################################################

     - name: Set vars
       set_fact: 
        aci_info_single_host_inactive: &aci_info_single_host_inactive
          host: 124.145.225.187
          username: "{{ aci_username }}"
          password: "{{ aci_password }}"
          validate_certs: '{{ validate_certs | default(false) }}'
          use_ssl: '{{ use_ssl | default(true) }}'
          timeout: 5
          output_level: debug

     - name: Set vars
       set_fact: 
        aci_info_single_host_inactive_certificate: &aci_info_single_host_inactive_certificate
          host: 124.145.225.187
          username: "{{ aci_username }}"
          validate_certs: '{{ validate_certs | default(false) }}'
          use_ssl: '{{ use_ssl | default(true) }}'
          timeout: 5
          output_level: debug
    
     - name: Set Single inactive host in inventory 
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 124.145.225.187
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"
          
     - name: Delete Tenant on single inactive host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant on single inactive host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant on single inactive host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant on single inactive host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       ignore_errors: yes

     - name: Delete Tenant on single inactive host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant on single inactive host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant on single inactive host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the inventory with password
       cisco.aci.aci_ap:
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       ignore_errors: yes

     - name: Delete Tenant on single inactive host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

###############################################################################

     - name: Set vars
       set_fact: 
        aci_info_first_host_active: &aci_info_first_host_active
          host: 173.36.219.72,124.145.225.187,161.65.67.15,100.139.68.211,124.145.225.187,161.65.67.15,161.46.181.230
          username: "{{ aci_username }}"
          password: "{{ aci_password }}"
          validate_certs: '{{ validate_certs | default(false) }}'
          use_ssl: '{{ use_ssl | default(true) }}'
          timeout: 5
          output_level: debug

     - name: Set vars
       set_fact: 
        aci_info_first_host_active_certificate: &aci_info_first_host_active_certificate
          host: 173.36.219.72,124.145.225.187,161.65.67.15,100.139.68.211,124.145.225.187,161.65.67.15,161.46.181.230
          username: "{{ aci_username }}"
          validate_certs: '{{ validate_certs | default(false) }}'
          use_ssl: '{{ use_ssl | default(true) }}'
          timeout: 5
          output_level: debug

     - name: Set the inventory with the first host in the list as active
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 173.36.219.72,124.145.225.187,161.65.67.15,100.139.68.211,124.145.225.187,161.65.67.15,161.46.181.230
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant on the first active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_first_active_host_1

     - name: Add Tenant on the first active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_first_active_host_1

     - name: Add a new AP on the first active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_first_active_host_1

     - name: Delete Tenant on the first active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_first_active_host_2

     - name: Add Tenant on the first active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_first_active_host_2

     - name: Add a new AP on the first active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_first_active_host_2

     - name: Delete Tenant on the first active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_first_active_host_3

     - name: Add Tenant on the first active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_first_active_host_3

     - name: Add a new AP on the first active host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_first_active_host_3

     - name: Delete Tenant on the first active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_first_active_host_4

     - name: Add Tenant on the first active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_first_active_host_4

     - name: Add a new AP on the first active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_first_active_host_4

     - name: Delete Tenant on the first active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_first_active_host_5

     - name: Add Tenant on the first active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_first_active_host_5

     - name: Add a new AP on the first active host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_first_active_host_5

     - name: Delete Tenant on the first active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_first_active_host_6

     - name: Add Tenant on the first active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_first_active_host_6

     - name: Add a new AP on the first active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_first_active_host_6

     - name: Delete Tenant on the first active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_first_active_host_7

     - name: Add Tenant on the first active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_first_active_host_7

     - name: Add a new AP on the first active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_first_active_host_7

     - name: Delete Tenant on the first active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_first_active_host_8

     - name: Add Tenant on the first active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_first_active_host_8

     - name: Add a new AP on the first active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_first_active_host_8

     - name: Verify operations on first active host
       assert:
         that:
          - task_pwd_delete_tenant_first_active_host_1.current == []
          - task_pwd_delete_tenant_first_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_first_active_host_1 is changed
          - task_pwd_add_tenant_first_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_first_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_first_active_host_1 is changed
          - task_pwd_add_ap_first_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_first_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_first_active_host_2 is changed
          - task_cert_delete_tenant_first_active_host_2.current == []
          - task_cert_delete_tenant_first_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_first_active_host_2 is changed
          - task_cert_add_tenant_first_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_first_active_host_2.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_first_active_host_2 is changed
          - task_cert_add_ap_first_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_first_active_host_2.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_pwd_delete_tenant_first_active_host_3 is changed
          - task_pwd_delete_tenant_first_active_host_3.current == []
          - task_pwd_delete_tenant_first_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_first_active_host_3 is changed
          - task_pwd_add_tenant_first_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_first_active_host_3.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_first_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_first_active_host_3 is changed
          - task_pwd_add_ap_first_active_host_3.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - inventory_pwd_delete_tenant_first_active_host_4 is changed
          - inventory_pwd_delete_tenant_first_active_host_4.current == []
          - inventory_pwd_delete_tenant_first_active_host_4.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_add_tenant_first_active_host_4 is changed
          - inventory_pwd_add_tenant_first_active_host_4.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_add_tenant_first_active_host_4.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - inventory_pwd_add_ap_first_active_host_4 is changed
          - inventory_pwd_add_ap_first_active_host_4.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_add_ap_first_active_host_4.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_pwd_delete_tenant_first_active_host_5 is changed
          - task_pwd_delete_tenant_first_active_host_5.current == []
          - task_pwd_delete_tenant_first_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_first_active_host_5 is changed
          - task_pwd_add_tenant_first_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_first_active_host_5.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_first_active_host_5 is changed
          - task_pwd_add_ap_first_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_first_active_host_5.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_first_active_host_6 is changed
          - task_cert_delete_tenant_first_active_host_6.current == []
          - task_cert_delete_tenant_first_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_first_active_host_6 is changed
          - task_cert_add_tenant_first_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_first_active_host_6.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_first_active_host_6 is changed
          - task_cert_add_ap_first_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_first_active_host_6.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - inventory_pwd_delete_tenant_first_active_host_7 is changed
          - inventory_pwd_delete_tenant_first_active_host_7.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_delete_tenant_first_active_host_7.current == []
          - inventory_pwd_add_tenant_first_active_host_7 is changed
          - inventory_pwd_add_tenant_first_active_host_7.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_add_tenant_first_active_host_7.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - inventory_pwd_add_ap_first_active_host_7 is changed
          - inventory_pwd_add_ap_first_active_host_7.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_add_ap_first_active_host_7.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_first_active_host_8 is changed
          - task_cert_delete_tenant_first_active_host_8.current == []
          - task_cert_delete_tenant_first_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_first_active_host_8 is changed
          - task_cert_add_tenant_first_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_first_active_host_8.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_first_active_host_8 is changed
          - task_cert_add_ap_first_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_first_active_host_8.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"

# ##############################################################################

     - name: Set vars
       set_fact: 
        aci_info_second_active_host: &aci_info_second_active_host
          host: 124.145.225.187,173.36.219.72,161.65.67.15,100.139.68.211,124.145.225.187,161.65.67.15,161.46.181.230
          username: "{{ aci_username }}"
          password: "{{ aci_password }}"
          validate_certs: '{{ validate_certs | default(false) }}'
          use_ssl: '{{ use_ssl | default(true) }}'
          timeout: 5
          output_level: debug

     - name: Set vars
       set_fact: 
        aci_info_second_active_host_certificate: &aci_info_second_active_host_certificate
          host: 124.145.225.187,173.36.219.72,161.65.67.15,100.139.68.211,124.145.225.187,161.65.67.15,161.46.181.230
          username: "{{ aci_username }}"
          validate_certs: '{{ validate_certs | default(false) }}'
          use_ssl: '{{ use_ssl | default(true) }}'
          timeout: 5
          output_level: debug

     - name: Set the inventory with the second host in the list as active
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 124.145.225.187,173.36.219.72,161.65.67.15,100.139.68.211,124.145.225.187,161.65.67.15,161.46.181.230
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant on the second active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_second_active_host_1

     - name: Add Tenant on the second active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_second_active_host_1

     - name: Add a new AP on the second active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_second_active_host_1

     - name: Delete Tenant on the second active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_second_active_host_2

     - name: Add Tenant on the second active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_second_active_host_2

     - name: Add a new AP on the second active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_second_active_host_2

     - name: Delete Tenant on the second active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_second_active_host_3

     - name: Add Tenant on the second active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_second_active_host_3

     - name: Add a new AP on the second active host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_second_active_host_3

     - name: Delete Tenant on the second active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_second_active_host_4

     - name: Add Tenant on the second active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_second_active_host_4

     - name: Add a new AP on the second active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_second_active_host_4

     - name: Delete Tenant on the second active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_second_active_host_5

     - name: Add Tenant on the second active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_second_active_host_5

     - name: Add a new AP on the second active host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_second_active_host_5

     - name: Delete Tenant on the second active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_second_active_host_6

     - name: Add Tenant on the second active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_second_active_host_6

     - name: Add a new AP on the second active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_second_active_host_6

     - name: Delete Tenant on the second active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_second_active_host_7

     - name: Add Tenant on the second active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_second_active_host_7

     - name: Add a new AP on the second active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_second_active_host_7

     - name: Delete Tenant on the second active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_second_active_host_8

     - name: Add Tenant on the second active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_second_active_host_8

     - name: Add a new AP on the second active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_second_active_host_8

     - name: Verify operations on second active host
       assert:
         that:
          - task_pwd_delete_tenant_second_active_host_1.current == []
          - task_pwd_delete_tenant_second_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_delete_tenant_second_active_host_1.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_pwd_add_tenant_second_active_host_1 is changed
          - task_pwd_add_tenant_second_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_second_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_second_active_host_1 is changed
          - task_pwd_add_ap_second_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_second_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_second_active_host_2 is changed
          - task_cert_delete_tenant_second_active_host_2.current == []
          - task_cert_delete_tenant_second_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_delete_tenant_second_active_host_2.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_cert_add_tenant_second_active_host_2 is changed
          - task_cert_add_tenant_second_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_second_active_host_2.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_second_active_host_2 is changed
          - task_cert_add_ap_second_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_second_active_host_2.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_pwd_delete_tenant_second_active_host_3 is changed
          - task_pwd_delete_tenant_second_active_host_3.current == []
          - task_pwd_delete_tenant_second_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_delete_tenant_second_active_host_3.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_pwd_add_tenant_second_active_host_3 is changed
          - task_pwd_add_tenant_second_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_second_active_host_3.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_second_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_second_active_host_3 is changed
          - task_pwd_add_ap_second_active_host_3.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - inventory_pwd_delete_tenant_second_active_host_4 is changed
          - inventory_pwd_delete_tenant_second_active_host_4.current == []
          - inventory_pwd_delete_tenant_second_active_host_4.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_delete_tenant_second_active_host_4.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - inventory_pwd_add_tenant_second_active_host_4 is changed
          - inventory_pwd_add_tenant_second_active_host_4.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_add_tenant_second_active_host_4.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - inventory_pwd_add_ap_second_active_host_4 is changed
          - inventory_pwd_add_ap_second_active_host_4.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_add_ap_second_active_host_4.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_pwd_delete_tenant_second_active_host_5 is changed
          - task_pwd_delete_tenant_second_active_host_5.current == []
          - task_pwd_delete_tenant_second_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_delete_tenant_second_active_host_5.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_pwd_add_tenant_second_active_host_5 is changed
          - task_pwd_add_tenant_second_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_second_active_host_5.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_second_active_host_5 is changed
          - task_pwd_add_ap_second_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_second_active_host_5.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_second_active_host_6 is changed
          - task_cert_delete_tenant_second_active_host_6.current == []
          - task_cert_delete_tenant_second_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_delete_tenant_second_active_host_6.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_cert_add_tenant_second_active_host_6 is changed
          - task_cert_add_tenant_second_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_second_active_host_6.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_second_active_host_6 is changed
          - task_cert_add_ap_second_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_second_active_host_6.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - inventory_pwd_delete_tenant_second_active_host_7 is changed
          - inventory_pwd_delete_tenant_second_active_host_7.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_delete_tenant_second_active_host_7.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - inventory_pwd_delete_tenant_second_active_host_7.current == []
          - inventory_pwd_add_tenant_second_active_host_7 is changed
          - inventory_pwd_add_tenant_second_active_host_7.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_add_tenant_second_active_host_7.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - inventory_pwd_add_ap_second_active_host_7 is changed
          - inventory_pwd_add_ap_second_active_host_7.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_add_ap_second_active_host_7.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_second_active_host_8 is changed
          - task_cert_delete_tenant_second_active_host_8.current == []
          - task_cert_delete_tenant_second_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_delete_tenant_second_active_host_8.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_cert_add_tenant_second_active_host_8 is changed
          - task_cert_add_tenant_second_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_second_active_host_8.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_second_active_host_8 is changed
          - task_cert_add_ap_second_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_second_active_host_8.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"

#     ###############################################################################

     - name: Set vars
       set_fact: 
        aci_info_last_active_host: &aci_info_last_active_host
          host: 124.145.225.187,89.208.146.34,128.228.131.123,100.139.68.211,124.145.225.187,173.36.219.72
          username: "{{ aci_username }}"
          password: "{{ aci_password }}"
          validate_certs: '{{ validate_certs | default(false) }}'
          use_ssl: '{{ use_ssl | default(true) }}'
          timeout: 5
          output_level: debug

     - name: Set vars
       set_fact: 
        aci_info_last_active_host_certificate: &aci_info_last_active_host_certificate
          host: 124.145.225.187,89.208.146.34,128.228.131.123,100.139.68.211,124.145.225.187,173.36.219.72
          username: "{{ aci_username }}"
          validate_certs: '{{ validate_certs | default(false) }}'
          use_ssl: '{{ use_ssl | default(true) }}'
          timeout: 5
          output_level: debug

     - name: Set the inventory with the last host in the list as active
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 124.145.225.187,89.208.146.34,128.228.131.123,100.139.68.211,124.145.225.187,173.36.219.72
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant on the last active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_last_active_host_1

     - name: Add Tenant on the last active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_last_active_host_1

     - name: Add a new AP on the last active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_last_active_host_1

     - name: Delete Tenant on the last active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_last_active_host_2

     - name: Add Tenant on the last active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_last_active_host_2

     - name: Add a new AP on the last active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_last_active_host_2

     - name: Delete Tenant on the last active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_last_active_host_3

     - name: Add Tenant on the last active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_last_active_host_3

     - name: Add a new AP on the last active host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_last_active_host_3

     - name: Delete Tenant on the last active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_last_active_host_4

     - name: Add Tenant on the last active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_last_active_host_4

     - name: Add a new AP on the last active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_last_active_host_4

     - name: Delete Tenant on the last active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_last_active_host_5

     - name: Add Tenant on the last active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_last_active_host_5

     - name: Add a new AP on the last active host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_last_active_host_5

     - name: Delete Tenant on the last active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_last_active_host_6

     - name: Add Tenant on the last active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_last_active_host_6

     - name: Add a new AP on the last active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_last_active_host_6

     - name: Delete Tenant on the last active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_last_active_host_7

     - name: Add Tenant on the last active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_last_active_host_7

     - name: Add a new AP on the last active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_last_active_host_7

     - name: Delete Tenant on the last active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_last_active_host_8

     - name: Add Tenant on the last active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_last_active_host_8

     - name: Add a new AP on the last active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_last_active_host_8

     - name: Verify operations on last active host
       assert:
         that:
          - task_pwd_delete_tenant_last_active_host_1.current == []
          - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
          - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.11.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
          - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.17.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
          - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.23.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
          - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.29.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_pwd_add_tenant_last_active_host_1 is changed
          - task_pwd_add_tenant_last_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_last_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_last_active_host_1 is changed
          - task_pwd_add_ap_last_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_last_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_last_active_host_2 is changed
          - task_cert_delete_tenant_last_active_host_2.current == []
          - task_cert_delete_tenant_last_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_delete_tenant_last_active_host_2.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
          - task_cert_delete_tenant_last_active_host_2.httpapi_logs.8.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
          - task_cert_delete_tenant_last_active_host_2.httpapi_logs.13.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
          - task_cert_delete_tenant_last_active_host_2.httpapi_logs.18.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
          - task_cert_delete_tenant_last_active_host_2.httpapi_logs.23.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_cert_add_tenant_last_active_host_2 is changed
          - task_cert_add_tenant_last_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_last_active_host_2.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_last_active_host_2 is changed
          - task_cert_add_ap_last_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_last_active_host_2.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_pwd_delete_tenant_last_active_host_3 is changed
          - task_pwd_delete_tenant_last_active_host_3.current == []
          - task_pwd_delete_tenant_last_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_delete_tenant_last_active_host_3.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
          - task_pwd_delete_tenant_last_active_host_3.httpapi_logs.11.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
          - task_pwd_delete_tenant_last_active_host_3.httpapi_logs.17.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
          - task_pwd_delete_tenant_last_active_host_3.httpapi_logs.23.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
          - task_pwd_delete_tenant_last_active_host_3.httpapi_logs.29.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_pwd_add_tenant_last_active_host_3 is changed
          - task_pwd_add_tenant_last_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_last_active_host_3.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_last_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_last_active_host_3 is changed
          - task_pwd_add_ap_last_active_host_3.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - inventory_pwd_delete_tenant_last_active_host_4 is changed
          - inventory_pwd_delete_tenant_last_active_host_4.current == []
          - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
          - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.11.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
          - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.17.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
          - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.23.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
          - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.29.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - inventory_pwd_add_tenant_last_active_host_4 is changed
          - inventory_pwd_add_tenant_last_active_host_4.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_add_tenant_last_active_host_4.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - inventory_pwd_add_ap_last_active_host_4 is changed
          - inventory_pwd_add_ap_last_active_host_4.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_add_ap_last_active_host_4.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_pwd_delete_tenant_last_active_host_5 is changed
          - task_pwd_delete_tenant_last_active_host_5.current == []
          - task_pwd_delete_tenant_last_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_delete_tenant_last_active_host_5.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
          - task_pwd_delete_tenant_last_active_host_5.httpapi_logs.11.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
          - task_pwd_delete_tenant_last_active_host_5.httpapi_logs.17.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
          - task_pwd_delete_tenant_last_active_host_5.httpapi_logs.23.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
          - task_pwd_delete_tenant_last_active_host_5.httpapi_logs.29.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_pwd_add_tenant_last_active_host_5 is changed
          - task_pwd_add_tenant_last_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_last_active_host_5.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_last_active_host_5 is changed
          - task_pwd_add_ap_last_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_last_active_host_5.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_last_active_host_6 is changed
          - task_cert_delete_tenant_last_active_host_6.current == []
          - task_cert_delete_tenant_last_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_delete_tenant_last_active_host_6.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
          - task_cert_delete_tenant_last_active_host_6.httpapi_logs.8.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
          - task_cert_delete_tenant_last_active_host_6.httpapi_logs.13.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
          - task_cert_delete_tenant_last_active_host_6.httpapi_logs.18.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
          - task_cert_delete_tenant_last_active_host_6.httpapi_logs.23.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_cert_add_tenant_last_active_host_6 is changed
          - task_cert_add_tenant_last_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_last_active_host_6.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_last_active_host_6 is changed
          - task_cert_add_ap_last_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_last_active_host_6.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - inventory_pwd_delete_tenant_last_active_host_7 is changed
          - inventory_pwd_delete_tenant_last_active_host_7.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_delete_tenant_last_active_host_7.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
          - inventory_pwd_delete_tenant_last_active_host_7.httpapi_logs.11.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
          - inventory_pwd_delete_tenant_last_active_host_7.httpapi_logs.17.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
          - inventory_pwd_delete_tenant_last_active_host_7.httpapi_logs.23.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
          - inventory_pwd_delete_tenant_last_active_host_7.httpapi_logs.29.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - inventory_pwd_delete_tenant_last_active_host_7.current == []
          - inventory_pwd_add_tenant_last_active_host_7 is changed
          - inventory_pwd_add_tenant_last_active_host_7.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_add_tenant_last_active_host_7.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - inventory_pwd_add_ap_last_active_host_7 is changed
          - inventory_pwd_add_ap_last_active_host_7.httpapi_logs.0.1 == "Setting credential authentication from inventory"
          - inventory_pwd_add_ap_last_active_host_7.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_last_active_host_8 is changed
          - task_cert_delete_tenant_last_active_host_8.current == []
          - task_cert_delete_tenant_last_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_delete_tenant_last_active_host_8.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
          - task_cert_delete_tenant_last_active_host_8.httpapi_logs.8.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
          - task_cert_delete_tenant_last_active_host_8.httpapi_logs.13.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
          - task_cert_delete_tenant_last_active_host_8.httpapi_logs.18.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
          - task_cert_delete_tenant_last_active_host_8.httpapi_logs.23.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_cert_add_tenant_last_active_host_8 is changed
          - task_cert_add_tenant_last_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_last_active_host_8.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_last_active_host_8 is changed
          - task_cert_add_ap_last_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_last_active_host_8.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"

#     ###############################################################################

     - name: Set vars
       set_fact: 
        aci_info_all_hosts_inactive: &aci_info_all_hosts_inactive
          host: 124.145.225.187,161.65.67.15,100.139.68.211,89.208.146.34
          username: "{{ aci_username }}"
          password: "{{ aci_password }}"
          validate_certs: '{{ validate_certs | default(false) }}'
          use_ssl: '{{ use_ssl | default(true) }}'
          timeout: 5
          output_level: debug

     - name: Set vars
       set_fact: 
        aci_info_all_hosts_inactive_certificate: &aci_info_all_hosts_inactive_certificate
          host: 124.145.225.187,161.65.67.15,100.139.68.211,89.208.146.34
          username: "{{ aci_username }}"
          validate_certs: '{{ validate_certs | default(false) }}'
          use_ssl: '{{ use_ssl | default(true) }}'
          timeout: 5
          output_level: debug

     - name: Set the inventory with all the hosts in the inventory as inactive
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 124.145.225.187,161.65.67.15,100.139.68.211,89.208.146.34
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via task hosts credential
       cisco.aci.aci_ap:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant via task hosts certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via task hosts certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via task hosts certificate
       cisco.aci.aci_ap:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via task hosts credential
       cisco.aci.aci_ap:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant via inventory host
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via inventory host
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via inventory host
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       ignore_errors: yes

     - name: Delete Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via task hosts credential
       cisco.aci.aci_ap:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via task hosts certificate
       cisco.aci.aci_ap:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       ignore_errors: yes

     - name: Delete Tenant via task hosts certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via task hosts certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via task hosts certificate
       cisco.aci.aci_ap:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

#############################################################################################
#### Random Tets

     - name: Delete Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_single_active_host_1

     - name: Delete Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_second_single_active_host_1

     - name: Add Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_single_active_host_1

     - name: Add Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_second_single_active_host_1

     - name: Add a new AP on single active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_single_active_host_1

     - name: Add a new AP on single active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_second_single_active_host_1

     - name: Delete Tenant on single inactive host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant on the first active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_first_active_host_1

     - name: Add Tenant on the first active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_first_active_host_1

     - name: Add a new AP on the first active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_first_active_host_1

     - name: Delete Tenant on the second active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_second_active_host_1

     - name: Add Tenant on the second active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_second_active_host_1

     - name: Add a new AP on the second active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_second_active_host_1

     - name: Delete Tenant on the last active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_last_active_host_1

     - name: Add Tenant on the last active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_last_active_host_1

     - name: Add a new AP on the last active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_last_active_host_1

     - name: Delete Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via task hosts credential
       cisco.aci.aci_ap:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant on single active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_single_active_host_2

     - name: Add Tenant on single active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_single_active_host_2

     - name: Add a new AP on single active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_single_active_host_2

     - name: Delete Tenant on single inactive host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant on the first active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_first_active_host_2

     - name: Add Tenant on the first active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_first_active_host_2

     - name: Add a new AP on the first active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_first_active_host_2

     - name: Delete Tenant on the second active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_second_active_host_2

     - name: Add Tenant on the second active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_second_active_host_2

     - name: Add a new AP on the second active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_second_active_host_2

     - name: Delete Tenant on the last active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_last_active_host_2

     - name: Add Tenant on the last active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_last_active_host_2

     - name: Add a new AP on the last active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_last_active_host_2

     - name: Delete Tenant via task hosts certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via task hosts certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via task hosts certificate
       cisco.aci.aci_ap:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Set hosts 1
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 173.36.219.72
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant on single active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_single_active_host_4_random1

     - name: Add Tenant on single active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_single_active_host_4_random1

     - name: Add a new AP on single active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_single_active_host_4_random1

      ## HTTP Error
     - name: Delete Tenant via inventory host
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add a new AP via inventory host
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       ignore_errors: yes

     - name: Set hosts 2
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 124.145.225.187
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant on single inactive host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       ignore_errors: yes

     - name: Set hosts 3
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 173.36.219.72,124.145.225.187,161.65.67.15,100.139.68.211,124.145.225.187,161.65.67.15,161.46.181.230
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant on the first active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_first_active_host_4_random2

     - name: Add Tenant on the first active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_first_active_host_4_random2

     - name: Add a new AP on the first active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_first_active_host_4_random2

     - name: Set hosts 4
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 124.145.225.187,173.36.219.72,161.65.67.15,100.139.68.211,124.145.225.187,161.65.67.15,161.46.181.230
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant on the second active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_second_active_host_4_random3

     - name: Add Tenant on the second active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_second_active_host_4_random3

     - name: Add a new AP on the second active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_second_active_host_4_random3

     - name: Set hosts 5
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 124.145.225.187,89.208.146.34,128.228.131.123,100.139.68.211,124.145.225.187,173.36.219.72
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant on the last active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_last_active_host_4_random4

     - name: Add Tenant on the last active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_last_active_host_4_random4

     - name: Add a new AP on the last active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_last_active_host_4_random4

     - name: Set hosts 6
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 124.145.225.187,161.65.67.15,100.139.68.211,89.208.146.34
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant via inventory host
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via inventory host
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via inventory host
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       ignore_errors: yes

     - name: Verify random operations
       assert:
         that:
         - task_pwd_delete_tenant_single_active_host_1.current == []
         - task_pwd_delete_tenant_second_single_active_host_1.current == []
         - task_pwd_delete_tenant_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_delete_tenant_second_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_single_active_host_1 is changed
         - task_pwd_add_tenant_second_single_active_host_1 is changed
         - task_pwd_add_tenant_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_second_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_single_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_pwd_add_tenant_second_single_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_pwd_add_ap_single_active_host_1 is changed
         - task_pwd_add_ap_second_single_active_host_1 is changed
         - task_pwd_add_ap_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_ap_second_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_ap_single_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_pwd_add_ap_second_single_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_pwd_delete_tenant_first_active_host_1.current == []
         - task_pwd_delete_tenant_first_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_first_active_host_1 is changed
         - task_pwd_add_tenant_first_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_first_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_pwd_add_ap_first_active_host_1 is changed
         - task_pwd_add_ap_first_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_ap_first_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_pwd_delete_tenant_second_active_host_1.current == []
         - task_pwd_delete_tenant_second_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_delete_tenant_second_active_host_1.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
         - task_pwd_add_tenant_second_active_host_1 is changed
         - task_pwd_add_tenant_second_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_second_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_pwd_add_ap_second_active_host_1 is changed
         - task_pwd_add_ap_second_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_ap_second_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_pwd_delete_tenant_last_active_host_1.current == []
         - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
         - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.11.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
         - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.17.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
         - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.23.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
         - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.29.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
         - task_pwd_add_tenant_last_active_host_1 is changed
         - task_pwd_add_tenant_last_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_last_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_pwd_add_ap_last_active_host_1 is changed
         - task_pwd_add_ap_last_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_ap_last_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_cert_delete_tenant_single_active_host_2 is changed
         - task_cert_delete_tenant_single_active_host_2.current == []
         - task_cert_delete_tenant_single_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_single_active_host_2 is changed
         - task_cert_add_tenant_single_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_single_active_host_2.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_cert_add_ap_single_active_host_2 is changed
         - task_cert_add_ap_single_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_ap_single_active_host_2.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_cert_delete_tenant_first_active_host_2 is changed
         - task_cert_delete_tenant_first_active_host_2.current == []
         - task_cert_delete_tenant_first_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_first_active_host_2 is changed
         - task_cert_add_tenant_first_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_first_active_host_2.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_cert_add_ap_first_active_host_2 is changed
         - task_cert_add_ap_first_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_ap_first_active_host_2.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_cert_delete_tenant_second_active_host_2 is changed
         - task_cert_delete_tenant_second_active_host_2.current == []
         - task_cert_delete_tenant_second_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_delete_tenant_second_active_host_2.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
         - task_cert_add_tenant_second_active_host_2 is changed
         - task_cert_add_tenant_second_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_second_active_host_2.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_cert_add_ap_second_active_host_2 is changed
         - task_cert_add_ap_second_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_ap_second_active_host_2.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_cert_delete_tenant_last_active_host_2 is changed
         - task_cert_delete_tenant_last_active_host_2.current == []
         - task_cert_delete_tenant_last_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_delete_tenant_last_active_host_2.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
         - task_cert_delete_tenant_last_active_host_2.httpapi_logs.8.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
         - task_cert_delete_tenant_last_active_host_2.httpapi_logs.13.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
         - task_cert_delete_tenant_last_active_host_2.httpapi_logs.18.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
         - task_cert_delete_tenant_last_active_host_2.httpapi_logs.23.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
         - task_cert_add_tenant_last_active_host_2 is changed
         - task_cert_add_tenant_last_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_last_active_host_2.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_cert_add_ap_last_active_host_2 is changed
         - task_cert_add_ap_last_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_ap_last_active_host_2.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - inventory_pwd_delete_tenant_single_active_host_4_random1 is changed
         - inventory_pwd_delete_tenant_single_active_host_4_random1.current == []
         - inventory_pwd_delete_tenant_single_active_host_4_random1.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_add_tenant_single_active_host_4_random1 is changed
         - inventory_pwd_add_tenant_single_active_host_4_random1.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_add_tenant_single_active_host_4_random1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - inventory_pwd_add_ap_single_active_host_4_random1 is changed
         - inventory_pwd_add_ap_single_active_host_4_random1.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_add_ap_single_active_host_4_random1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - inventory_pwd_delete_tenant_first_active_host_4_random2 is not changed
         - inventory_pwd_delete_tenant_first_active_host_4_random2.current == []
         - inventory_pwd_delete_tenant_first_active_host_4_random2.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_add_tenant_first_active_host_4_random2 is changed
         - inventory_pwd_add_tenant_first_active_host_4_random2.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_add_tenant_first_active_host_4_random2.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - inventory_pwd_add_ap_first_active_host_4_random2 is changed
         - inventory_pwd_add_ap_first_active_host_4_random2.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_add_ap_first_active_host_4_random2.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - inventory_pwd_delete_tenant_second_active_host_4_random3 is changed
         - inventory_pwd_delete_tenant_second_active_host_4_random3.current == []
         - inventory_pwd_delete_tenant_second_active_host_4_random3.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_delete_tenant_second_active_host_4_random3.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
         - inventory_pwd_add_tenant_second_active_host_4_random3 is changed
         - inventory_pwd_add_tenant_second_active_host_4_random3.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_add_tenant_second_active_host_4_random3.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - inventory_pwd_add_ap_second_active_host_4_random3 is changed
         - inventory_pwd_add_ap_second_active_host_4_random3.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_add_ap_second_active_host_4_random3.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - inventory_pwd_delete_tenant_last_active_host_4_random4 is changed
         - inventory_pwd_delete_tenant_last_active_host_4_random4.current == []
         - inventory_pwd_delete_tenant_last_active_host_4_random4.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_delete_tenant_last_active_host_4_random4.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
         - inventory_pwd_delete_tenant_last_active_host_4_random4.httpapi_logs.11.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
         - inventory_pwd_delete_tenant_last_active_host_4_random4.httpapi_logs.17.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
         - inventory_pwd_delete_tenant_last_active_host_4_random4.httpapi_logs.23.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
         - inventory_pwd_delete_tenant_last_active_host_4_random4.httpapi_logs.29.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
         - inventory_pwd_add_tenant_last_active_host_4_random4 is changed
         - inventory_pwd_add_tenant_last_active_host_4_random4.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_add_tenant_last_active_host_4_random4.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - inventory_pwd_add_ap_last_active_host_4_random4 is changed
         - inventory_pwd_add_ap_last_active_host_4_random4.httpapi_logs.0.1 == "Setting credential authentication from inventory"
         - inventory_pwd_add_ap_last_active_host_4_random4.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"

    ## Plugin Tests using session_key from inventory (Part2) ##
     - name: Set Single active host in inventory 
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 173.36.219.72
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_httpapi_session_key: {'admin': '{{ role_path }}/tasks/certs/admin.key'}
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"
        output_level: debug
     
     - name: Delete Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_single_active_host_1

     - name: Add Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_single_active_host_1

     - name: Add a new AP on single active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_single_active_host_1

     - name: Delete Tenant on single active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_single_active_host_2

     - name: Add Tenant on single active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_single_active_host_2

     - name: Add a new AP on single active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_single_active_host_2

     - name: Delete Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_single_active_host_3

     - name: Add Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_single_active_host_3

     - name: Add a new AP on single active host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_single_active_host_3

     - name: Delete Tenant on single active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_single_active_host_4

     - name: Add Tenant on single active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_single_active_host_4

     - name: Add a new AP on single active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_single_active_host_4

     - name: Delete Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_single_active_host_5

     - name: Add Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_single_active_host_5

     - name: Add a new AP on single active host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_single_active_host_5

     - name: Delete Tenant on single active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_single_active_host_6

     - name: Add Tenant on single active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_single_active_host_6

     - name: Add a new AP on single active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_single_active_host_6

     - name: Delete Tenant on single active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_single_active_host_7

     - name: Add Tenant on single active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_single_active_host_7

     - name: Add a new AP on single active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_single_active_host_7

     - name: Delete Tenant on single active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_single_active_host_8

     - name: Add Tenant on single active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_single_active_host_8

     - name: Add a new AP on single active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_single_active_host_8

     - name: Verify operations on single active host
       assert:
         that:
         - task_pwd_delete_tenant_single_active_host_1.current == []
         - task_pwd_delete_tenant_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_single_active_host_1 is changed
         - task_pwd_add_tenant_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_single_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_pwd_add_ap_single_active_host_1 is changed
         - task_pwd_add_ap_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_ap_single_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_cert_delete_tenant_single_active_host_2 is changed
         - task_cert_delete_tenant_single_active_host_2.current == []
         - task_cert_delete_tenant_single_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_single_active_host_2 is changed
         - task_cert_add_tenant_single_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_single_active_host_2.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_cert_add_ap_single_active_host_2 is changed
         - task_cert_add_ap_single_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_ap_single_active_host_2.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_pwd_delete_tenant_single_active_host_3 is changed
         - task_pwd_delete_tenant_single_active_host_3.current == []
         - task_pwd_delete_tenant_single_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_single_active_host_3 is changed
         - task_pwd_add_tenant_single_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_single_active_host_3.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_pwd_add_ap_single_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_ap_single_active_host_3 is changed
         - task_pwd_add_ap_single_active_host_3.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - inventory_pwd_delete_tenant_single_active_host_4 is changed
         - inventory_pwd_delete_tenant_single_active_host_4.current == []
         - inventory_pwd_delete_tenant_single_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_add_tenant_single_active_host_4 is changed
         - inventory_pwd_add_tenant_single_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_add_tenant_single_active_host_4.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - inventory_pwd_add_ap_single_active_host_4 is changed
         - inventory_pwd_add_ap_single_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_add_ap_single_active_host_4.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_pwd_delete_tenant_single_active_host_5 is changed
         - task_pwd_delete_tenant_single_active_host_5.current == []
         - task_pwd_delete_tenant_single_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_single_active_host_5 is changed
         - task_pwd_add_tenant_single_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_single_active_host_5.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_pwd_add_ap_single_active_host_5 is changed
         - task_pwd_add_ap_single_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_ap_single_active_host_5.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_cert_delete_tenant_single_active_host_6 is changed
         - task_cert_delete_tenant_single_active_host_6.current == []
         - task_cert_delete_tenant_single_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_single_active_host_6 is changed
         - task_cert_add_tenant_single_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_single_active_host_6.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_cert_add_ap_single_active_host_6 is changed
         - task_cert_add_ap_single_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_ap_single_active_host_6.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - inventory_pwd_delete_tenant_single_active_host_7 is changed
         - inventory_pwd_delete_tenant_single_active_host_7.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_delete_tenant_single_active_host_7.current == []
         - inventory_pwd_add_tenant_single_active_host_7 is changed
         - inventory_pwd_add_tenant_single_active_host_7.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_add_tenant_single_active_host_7.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - inventory_pwd_add_ap_single_active_host_7 is changed
         - inventory_pwd_add_ap_single_active_host_7.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_add_ap_single_active_host_7.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_cert_delete_tenant_single_active_host_8 is changed
         - task_cert_delete_tenant_single_active_host_8.current == []
         - task_cert_delete_tenant_single_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_single_active_host_8 is changed
         - task_cert_add_tenant_single_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_single_active_host_8.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_cert_add_ap_single_active_host_8 is changed
         - task_cert_add_ap_single_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_ap_single_active_host_8.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         

######################################################################

     - name: Set Single inactive host in inventory 
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 124.145.225.187
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_httpapi_session_key: {'admin': '{{ role_path }}/tasks/certs/admin.key'}
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"
          
     - name: Delete Tenant on single inactive host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant on single inactive host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant on single inactive host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant on single inactive host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       ignore_errors: yes

     - name: Delete Tenant on single inactive host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant on single inactive host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant on single inactive host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the inventory with password
       cisco.aci.aci_ap:
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       ignore_errors: yes

     - name: Delete Tenant on single inactive host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

###############################################################################

     - name: Set the inventory with the first host in the list as active
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 173.36.219.72,124.145.225.187,161.65.67.15,100.139.68.211,124.145.225.187,161.65.67.15,161.46.181.230
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_httpapi_session_key: {'admin': '{{ role_path }}/tasks/certs/admin.key'}
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant on the first active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_first_active_host_1

     - name: Add Tenant on the first active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_first_active_host_1

     - name: Add a new AP on the first active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_first_active_host_1

     - name: Delete Tenant on the first active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_first_active_host_2

     - name: Add Tenant on the first active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_first_active_host_2

     - name: Add a new AP on the first active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_first_active_host_2

     - name: Delete Tenant on the first active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_first_active_host_3

     - name: Add Tenant on the first active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_first_active_host_3

     - name: Add a new AP on the first active host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_first_active_host_3

     - name: Delete Tenant on the first active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_first_active_host_4

     - name: Add Tenant on the first active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_first_active_host_4

     - name: Add a new AP on the first active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_first_active_host_4

     - name: Delete Tenant on the first active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_first_active_host_5

     - name: Add Tenant on the first active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_first_active_host_5

     - name: Add a new AP on the first active host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_first_active_host_5

     - name: Delete Tenant on the first active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_first_active_host_6

     - name: Add Tenant on the first active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_first_active_host_6

     - name: Add a new AP on the first active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_first_active_host_6

     - name: Delete Tenant on the first active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_first_active_host_7

     - name: Add Tenant on the first active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_first_active_host_7

     - name: Add a new AP on the first active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_first_active_host_7

     - name: Delete Tenant on the first active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_first_active_host_8

     - name: Add Tenant on the first active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_first_active_host_8

     - name: Add a new AP on the first active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_first_active_host_8

     - name: Verify operations on first active host
       assert:
         that:
          - task_pwd_delete_tenant_first_active_host_1.current == []
          - task_pwd_delete_tenant_first_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_first_active_host_1 is changed
          - task_pwd_add_tenant_first_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_first_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_first_active_host_1 is changed
          - task_pwd_add_ap_first_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_first_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_first_active_host_2 is changed
          - task_cert_delete_tenant_first_active_host_2.current == []
          - task_cert_delete_tenant_first_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_first_active_host_2 is changed
          - task_cert_add_tenant_first_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_first_active_host_2.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_first_active_host_2 is changed
          - task_cert_add_ap_first_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_first_active_host_2.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_pwd_delete_tenant_first_active_host_3 is changed
          - task_pwd_delete_tenant_first_active_host_3.current == []
          - task_pwd_delete_tenant_first_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_first_active_host_3 is changed
          - task_pwd_add_tenant_first_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_first_active_host_3.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_first_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_first_active_host_3 is changed
          - task_pwd_add_ap_first_active_host_3.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - inventory_pwd_delete_tenant_first_active_host_4 is changed
          - inventory_pwd_delete_tenant_first_active_host_4.current == []
          - inventory_pwd_delete_tenant_first_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_add_tenant_first_active_host_4 is changed
          - inventory_pwd_add_tenant_first_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_add_tenant_first_active_host_4.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - inventory_pwd_add_ap_first_active_host_4 is changed
          - inventory_pwd_add_ap_first_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_add_ap_first_active_host_4.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_pwd_delete_tenant_first_active_host_5 is changed
          - task_pwd_delete_tenant_first_active_host_5.current == []
          - task_pwd_delete_tenant_first_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_first_active_host_5 is changed
          - task_pwd_add_tenant_first_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_first_active_host_5.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_first_active_host_5 is changed
          - task_pwd_add_ap_first_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_first_active_host_5.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_first_active_host_6 is changed
          - task_cert_delete_tenant_first_active_host_6.current == []
          - task_cert_delete_tenant_first_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_first_active_host_6 is changed
          - task_cert_add_tenant_first_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_first_active_host_6.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_first_active_host_6 is changed
          - task_cert_add_ap_first_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_first_active_host_6.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - inventory_pwd_delete_tenant_first_active_host_7 is changed
          - inventory_pwd_delete_tenant_first_active_host_7.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_delete_tenant_first_active_host_7.current == []
          - inventory_pwd_add_tenant_first_active_host_7 is changed
          - inventory_pwd_add_tenant_first_active_host_7.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_add_tenant_first_active_host_7.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - inventory_pwd_add_ap_first_active_host_7 is changed
          - inventory_pwd_add_ap_first_active_host_7.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_add_ap_first_active_host_7.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_first_active_host_8 is changed
          - task_cert_delete_tenant_first_active_host_8.current == []
          - task_cert_delete_tenant_first_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_first_active_host_8 is changed
          - task_cert_add_tenant_first_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_first_active_host_8.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_first_active_host_8 is changed
          - task_cert_add_ap_first_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_first_active_host_8.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"

# ##############################################################################
     
     - name: Set the inventory with the second host in the list as active
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 124.145.225.187,173.36.219.72,161.65.67.15,100.139.68.211,124.145.225.187,161.65.67.15,161.46.181.230
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_httpapi_session_key: {'admin': '{{ role_path }}/tasks/certs/admin.key'}
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant on the second active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_second_active_host_1

     - name: Add Tenant on the second active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_second_active_host_1

     - name: Add a new AP on the second active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_second_active_host_1

     - name: Delete Tenant on the second active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_second_active_host_2

     - name: Add Tenant on the second active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_second_active_host_2

     - name: Add a new AP on the second active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_second_active_host_2

     - name: Delete Tenant on the second active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_second_active_host_3

     - name: Add Tenant on the second active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_second_active_host_3

     - name: Add a new AP on the second active host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_second_active_host_3

     - name: Delete Tenant on the second active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_second_active_host_4

     - name: Add Tenant on the second active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_second_active_host_4

     - name: Add a new AP on the second active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_second_active_host_4

     - name: Delete Tenant on the second active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_second_active_host_5

     - name: Add Tenant on the second active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_second_active_host_5

     - name: Add a new AP on the second active host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_second_active_host_5

     - name: Delete Tenant on the second active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_second_active_host_6

     - name: Add Tenant on the second active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_second_active_host_6

     - name: Add a new AP on the second active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_second_active_host_6

     - name: Delete Tenant on the second active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_second_active_host_7

     - name: Add Tenant on the second active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_second_active_host_7

     - name: Add a new AP on the second active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_second_active_host_7

     - name: Delete Tenant on the second active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_second_active_host_8

     - name: Add Tenant on the second active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_second_active_host_8

     - name: Add a new AP on the second active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_second_active_host_8

     - name: Verify operations on second active host
       assert:
         that:
          - task_pwd_delete_tenant_second_active_host_1.current == []
          - task_pwd_delete_tenant_second_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_delete_tenant_second_active_host_1.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_pwd_add_tenant_second_active_host_1 is changed
          - task_pwd_add_tenant_second_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_second_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_second_active_host_1 is changed
          - task_pwd_add_ap_second_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_second_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_second_active_host_2 is changed
          - task_cert_delete_tenant_second_active_host_2.current == []
          - task_cert_delete_tenant_second_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_delete_tenant_second_active_host_2.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_cert_add_tenant_second_active_host_2 is changed
          - task_cert_add_tenant_second_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_second_active_host_2.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_second_active_host_2 is changed
          - task_cert_add_ap_second_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_second_active_host_2.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_pwd_delete_tenant_second_active_host_3 is changed
          - task_pwd_delete_tenant_second_active_host_3.current == []
          - task_pwd_delete_tenant_second_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_delete_tenant_second_active_host_3.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_pwd_add_tenant_second_active_host_3 is changed
          - task_pwd_add_tenant_second_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_second_active_host_3.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_second_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_second_active_host_3 is changed
          - task_pwd_add_ap_second_active_host_3.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - inventory_pwd_delete_tenant_second_active_host_4 is changed
          - inventory_pwd_delete_tenant_second_active_host_4.current == []
          - inventory_pwd_delete_tenant_second_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_delete_tenant_second_active_host_4.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - inventory_pwd_add_tenant_second_active_host_4 is changed
          - inventory_pwd_add_tenant_second_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_add_tenant_second_active_host_4.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - inventory_pwd_add_ap_second_active_host_4 is changed
          - inventory_pwd_add_ap_second_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_add_ap_second_active_host_4.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_pwd_delete_tenant_second_active_host_5 is changed
          - task_pwd_delete_tenant_second_active_host_5.current == []
          - task_pwd_delete_tenant_second_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_delete_tenant_second_active_host_5.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_pwd_add_tenant_second_active_host_5 is changed
          - task_pwd_add_tenant_second_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_second_active_host_5.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_second_active_host_5 is changed
          - task_pwd_add_ap_second_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_second_active_host_5.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_second_active_host_6 is changed
          - task_cert_delete_tenant_second_active_host_6.current == []
          - task_cert_delete_tenant_second_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_delete_tenant_second_active_host_6.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_cert_add_tenant_second_active_host_6 is changed
          - task_cert_add_tenant_second_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_second_active_host_6.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_second_active_host_6 is changed
          - task_cert_add_ap_second_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_second_active_host_6.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - inventory_pwd_delete_tenant_second_active_host_7 is changed
          - inventory_pwd_delete_tenant_second_active_host_7.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_delete_tenant_second_active_host_7.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - inventory_pwd_delete_tenant_second_active_host_7.current == []
          - inventory_pwd_add_tenant_second_active_host_7 is changed
          - inventory_pwd_add_tenant_second_active_host_7.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_add_tenant_second_active_host_7.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - inventory_pwd_add_ap_second_active_host_7 is changed
          - inventory_pwd_add_ap_second_active_host_7.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_add_ap_second_active_host_7.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_second_active_host_8 is changed
          - task_cert_delete_tenant_second_active_host_8.current == []
          - task_cert_delete_tenant_second_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_delete_tenant_second_active_host_8.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_cert_add_tenant_second_active_host_8 is changed
          - task_cert_add_tenant_second_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_second_active_host_8.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_second_active_host_8 is changed
          - task_cert_add_ap_second_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_second_active_host_8.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"

#     ###############################################################################

     - name: Set the inventory with the last host in the list as active
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 124.145.225.187,89.208.146.34,128.228.131.123,100.139.68.211,124.145.225.187,173.36.219.72
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_httpapi_session_key: {'admin': '{{ role_path }}/tasks/certs/admin.key'}
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant on the last active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_last_active_host_1

     - name: Add Tenant on the last active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_last_active_host_1

     - name: Add a new AP on the last active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_last_active_host_1

     - name: Delete Tenant on the last active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_last_active_host_2

     - name: Add Tenant on the last active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_last_active_host_2

     - name: Add a new AP on the last active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_last_active_host_2

     - name: Delete Tenant on the last active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_last_active_host_3

     - name: Add Tenant on the last active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_last_active_host_3

     - name: Add a new AP on the last active host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_last_active_host_3

     - name: Delete Tenant on the last active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_last_active_host_4

     - name: Add Tenant on the last active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_last_active_host_4

     - name: Add a new AP on the last active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_last_active_host_4

     - name: Delete Tenant on the last active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_last_active_host_5

     - name: Add Tenant on the last active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_last_active_host_5

     - name: Add a new AP on the last active host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_last_active_host_5

     - name: Delete Tenant on the last active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_last_active_host_6

     - name: Add Tenant on the last active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_last_active_host_6

     - name: Add a new AP on the last active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_last_active_host_6

     - name: Delete Tenant on the last active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_last_active_host_7

     - name: Add Tenant on the last active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_last_active_host_7

     - name: Add a new AP on the last active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_last_active_host_7

     - name: Delete Tenant on the last active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_last_active_host_8

     - name: Add Tenant on the last active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_last_active_host_8

     - name: Add a new AP on the last active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_last_active_host_8

     - name: Verify operations on last active host
       assert:
         that:
          - task_pwd_delete_tenant_last_active_host_1.current == []
          - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
          - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.11.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
          - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.17.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
          - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.23.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
          - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.29.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_pwd_add_tenant_last_active_host_1 is changed
          - task_pwd_add_tenant_last_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_last_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_last_active_host_1 is changed
          - task_pwd_add_ap_last_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_last_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_last_active_host_2 is changed
          - task_cert_delete_tenant_last_active_host_2.current == []
          - task_cert_delete_tenant_last_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_delete_tenant_last_active_host_2.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
          - task_cert_delete_tenant_last_active_host_2.httpapi_logs.8.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
          - task_cert_delete_tenant_last_active_host_2.httpapi_logs.13.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
          - task_cert_delete_tenant_last_active_host_2.httpapi_logs.18.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
          - task_cert_delete_tenant_last_active_host_2.httpapi_logs.23.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_cert_add_tenant_last_active_host_2 is changed
          - task_cert_add_tenant_last_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_last_active_host_2.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_last_active_host_2 is changed
          - task_cert_add_ap_last_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_last_active_host_2.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_pwd_delete_tenant_last_active_host_3 is changed
          - task_pwd_delete_tenant_last_active_host_3.current == []
          - task_pwd_delete_tenant_last_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_delete_tenant_last_active_host_3.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
          - task_pwd_delete_tenant_last_active_host_3.httpapi_logs.11.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
          - task_pwd_delete_tenant_last_active_host_3.httpapi_logs.17.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
          - task_pwd_delete_tenant_last_active_host_3.httpapi_logs.23.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
          - task_pwd_delete_tenant_last_active_host_3.httpapi_logs.29.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_pwd_add_tenant_last_active_host_3 is changed
          - task_pwd_add_tenant_last_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_last_active_host_3.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_last_active_host_3.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_last_active_host_3 is changed
          - task_pwd_add_ap_last_active_host_3.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - inventory_pwd_delete_tenant_last_active_host_4 is changed
          - inventory_pwd_delete_tenant_last_active_host_4.current == []
          - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
          - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.8.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
          - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.13.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
          - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.18.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
          - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.23.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - inventory_pwd_add_tenant_last_active_host_4 is changed
          - inventory_pwd_add_tenant_last_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_add_tenant_last_active_host_4.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - inventory_pwd_add_ap_last_active_host_4 is changed
          - inventory_pwd_add_ap_last_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_add_ap_last_active_host_4.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_pwd_delete_tenant_last_active_host_5 is changed
          - task_pwd_delete_tenant_last_active_host_5.current == []
          - task_pwd_delete_tenant_last_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_delete_tenant_last_active_host_5.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
          - task_pwd_delete_tenant_last_active_host_5.httpapi_logs.11.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
          - task_pwd_delete_tenant_last_active_host_5.httpapi_logs.17.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
          - task_pwd_delete_tenant_last_active_host_5.httpapi_logs.23.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
          - task_pwd_delete_tenant_last_active_host_5.httpapi_logs.29.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_pwd_add_tenant_last_active_host_5 is changed
          - task_pwd_add_tenant_last_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_tenant_last_active_host_5.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_pwd_add_ap_last_active_host_5 is changed
          - task_pwd_add_ap_last_active_host_5.httpapi_logs.0.1 == "Setting credential authentication at task level"
          - task_pwd_add_ap_last_active_host_5.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_last_active_host_6 is changed
          - task_cert_delete_tenant_last_active_host_6.current == []
          - task_cert_delete_tenant_last_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_delete_tenant_last_active_host_6.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
          - task_cert_delete_tenant_last_active_host_6.httpapi_logs.8.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
          - task_cert_delete_tenant_last_active_host_6.httpapi_logs.13.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
          - task_cert_delete_tenant_last_active_host_6.httpapi_logs.18.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
          - task_cert_delete_tenant_last_active_host_6.httpapi_logs.23.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_cert_add_tenant_last_active_host_6 is changed
          - task_cert_add_tenant_last_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_last_active_host_6.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_last_active_host_6 is changed
          - task_cert_add_ap_last_active_host_6.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_last_active_host_6.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - inventory_pwd_delete_tenant_last_active_host_7 is changed
          - inventory_pwd_delete_tenant_last_active_host_7.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_delete_tenant_last_active_host_7.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
          - inventory_pwd_delete_tenant_last_active_host_7.httpapi_logs.8.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
          - inventory_pwd_delete_tenant_last_active_host_7.httpapi_logs.13.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
          - inventory_pwd_delete_tenant_last_active_host_7.httpapi_logs.18.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
          - inventory_pwd_delete_tenant_last_active_host_7.httpapi_logs.23.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - inventory_pwd_delete_tenant_last_active_host_7.current == []
          - inventory_pwd_add_tenant_last_active_host_7 is changed
          - inventory_pwd_add_tenant_last_active_host_7.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_add_tenant_last_active_host_7.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - inventory_pwd_add_ap_last_active_host_7 is changed
          - inventory_pwd_add_ap_last_active_host_7.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
          - inventory_pwd_add_ap_last_active_host_7.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
          - task_cert_delete_tenant_last_active_host_8 is changed
          - task_cert_delete_tenant_last_active_host_8.current == []
          - task_cert_delete_tenant_last_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_delete_tenant_last_active_host_8.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
          - task_cert_delete_tenant_last_active_host_8.httpapi_logs.8.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
          - task_cert_delete_tenant_last_active_host_8.httpapi_logs.13.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
          - task_cert_delete_tenant_last_active_host_8.httpapi_logs.18.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
          - task_cert_delete_tenant_last_active_host_8.httpapi_logs.23.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
          - task_cert_add_tenant_last_active_host_8 is changed
          - task_cert_add_tenant_last_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_tenant_last_active_host_8.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
          - task_cert_add_ap_last_active_host_8 is changed
          - task_cert_add_ap_last_active_host_8.httpapi_logs.0.1 == "Setting certificate authentication at task level"
          - task_cert_add_ap_last_active_host_8.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"

#     ###############################################################################

     - name: Set the inventory with all the hosts in the inventory as inactive
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 124.145.225.187,161.65.67.15,100.139.68.211,89.208.146.34
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_httpapi_session_key: {'admin': '{{ role_path }}/tasks/certs/admin.key'}
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via task hosts credential
       cisco.aci.aci_ap:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant via task hosts certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via task hosts certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via task hosts certificate
       cisco.aci.aci_ap:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via task hosts credential
       cisco.aci.aci_ap:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant via inventory host
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via inventory host
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via inventory host
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       ignore_errors: yes

     - name: Delete Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via task hosts credential
       cisco.aci.aci_ap:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via task hosts certificate
       cisco.aci.aci_ap:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       ignore_errors: yes

     - name: Delete Tenant via task hosts certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via task hosts certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via task hosts certificate
       cisco.aci.aci_ap:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

#############################################################################################
#### Random Tets

     - name: Delete Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_single_active_host_1

     - name: Delete Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_second_single_active_host_1

     - name: Add Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_single_active_host_1

     - name: Add Tenant on single active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_second_single_active_host_1

     - name: Add a new AP on single active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_single_active_host_1

     - name: Add a new AP on single active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_second_single_active_host_1

     - name: Delete Tenant on single inactive host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the task with password
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_inactive
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant on the first active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_first_active_host_1

     - name: Add Tenant on the first active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_first_active_host_1

     - name: Add a new AP on the first active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_first_host_active
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_first_active_host_1

     - name: Delete Tenant on the second active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_second_active_host_1

     - name: Add Tenant on the second active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_second_active_host_1

     - name: Add a new AP on the second active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_second_active_host
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_second_active_host_1

     - name: Delete Tenant on the last active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        state: absent
       register: task_pwd_delete_tenant_last_active_host_1

     - name: Add Tenant on the last active host present in the task with password
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        state: present
       register: task_pwd_add_tenant_last_active_host_1

     - name: Add a new AP on the last active host present in the task password
       cisco.aci.aci_ap:
        <<: *aci_info_last_active_host
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_pwd_add_ap_last_active_host_1

     - name: Delete Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via task hosts credential
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via task hosts credential
       cisco.aci.aci_ap:
        <<: *aci_info_all_hosts_inactive
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant on single active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_single_active_host_2

     - name: Add Tenant on single active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_single_active_host_2

     - name: Add a new AP on single active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_single_active_host_2

     - name: Delete Tenant on single inactive host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_single_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Delete Tenant on the first active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_first_active_host_2

     - name: Add Tenant on the first active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_first_active_host_2

     - name: Add a new AP on the first active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_first_host_active_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_first_active_host_2

     - name: Delete Tenant on the second active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_second_active_host_2

     - name: Add Tenant on the second active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_second_active_host_2

     - name: Add a new AP on the second active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_second_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_second_active_host_2

     - name: Delete Tenant on the last active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       register: task_cert_delete_tenant_last_active_host_2

     - name: Add Tenant on the last active host present in the task with certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       register: task_cert_add_tenant_last_active_host_2

     - name: Add a new AP on the last active host present in the task with certificate
       cisco.aci.aci_ap:
        <<: *aci_info_last_active_host_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       register: task_cert_add_ap_last_active_host_2

     - name: Delete Tenant via task hosts certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via task hosts certificate
       cisco.aci.aci_tenant:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via task hosts certificate
       cisco.aci.aci_ap:
        <<: *aci_info_all_hosts_inactive_certificate
        certificate_name: admin
        private_key: "{{ lookup('file', 'certs/admin.key') }}"
        tenant: ansible_test
        ap: ap
        description: default ap
        state: present
       ignore_errors: yes

     - name: Set hosts 1
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 173.36.219.72
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_httpapi_session_key: {'admin': '{{ role_path }}/tasks/certs/admin.key'}
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant on single active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_single_active_host_4_random1

     - name: Add Tenant on single active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_single_active_host_4_random1

     - name: Add a new AP on single active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_single_active_host_4_random1

     - name: Set hosts 2
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 124.145.225.187
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant on single inactive host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant on single inactive host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP on single inactive host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       ignore_errors: yes

     - name: Set hosts 3
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 173.36.219.72,124.145.225.187,161.65.67.15,100.139.68.211,124.145.225.187,161.65.67.15,161.46.181.230
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_httpapi_session_key: {'admin': '{{ role_path }}/tasks/certs/admin.key'}
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant on the first active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_first_active_host_4_random3

     - name: Add Tenant on the first active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_first_active_host_4_random3

     - name: Add a new AP on the first active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_first_active_host_4_random3

     - name: Set hosts 4
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 124.145.225.187,173.36.219.72,161.65.67.15,100.139.68.211,124.145.225.187,161.65.67.15,161.46.181.230
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_httpapi_session_key: {'admin': '{{ role_path }}/tasks/certs/admin.key'}
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant on the second active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_second_active_host_4_random4

     - name: Add Tenant on the second active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_second_active_host_4_random4

     - name: Add a new AP on the second active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_second_active_host_4_random4

     - name: Set hosts 5
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 124.145.225.187,89.208.146.34,128.228.131.123,100.139.68.211,124.145.225.187,173.36.219.72
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_httpapi_session_key: {'admin': '{{ role_path }}/tasks/certs/admin.key'}
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant on the last active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       register: inventory_pwd_delete_tenant_last_active_host_4_random5

     - name: Add Tenant on the last active host present in the inventory with password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       register: inventory_pwd_add_tenant_last_active_host_4_random5

     - name: Add a new AP on the last active host present in the inventory with password
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       register: inventory_pwd_add_ap_last_active_host_4_random5

     - name: Set hosts 6
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 124.145.225.187,161.65.67.15,100.139.68.211,89.208.146.34
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_httpapi_session_key: {'admin': '{{ role_path }}/tasks/certs/admin.key'}
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant via inventory host
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add Tenant via inventory host
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: present
       ignore_errors: yes

     - name: Add a new AP via inventory host
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       ignore_errors: yes
     
     ## HTTP Error
     - name: Delete Tenant via inventory host
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       ignore_errors: yes

     - name: Add a new AP via inventory host
       cisco.aci.aci_ap:
         output_level: debug
         tenant: ansible_test
         ap: ap
         description: default ap
         state: present
       ignore_errors: yes

     - name: Verify random operations
       assert:
         that:
         - task_pwd_delete_tenant_single_active_host_1.current == []
         - task_pwd_delete_tenant_second_single_active_host_1.current == []
         - task_pwd_delete_tenant_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_delete_tenant_second_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_single_active_host_1 is changed
         - task_pwd_add_tenant_second_single_active_host_1 is changed
         - task_pwd_add_tenant_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_second_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_single_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_pwd_add_tenant_second_single_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_pwd_add_ap_single_active_host_1 is changed
         - task_pwd_add_ap_second_single_active_host_1 is changed
         - task_pwd_add_ap_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_ap_second_single_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_ap_single_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_pwd_add_ap_second_single_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_pwd_delete_tenant_first_active_host_1.current == []
         - task_pwd_delete_tenant_first_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_first_active_host_1 is changed
         - task_pwd_add_tenant_first_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_first_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_pwd_add_ap_first_active_host_1 is changed
         - task_pwd_add_ap_first_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_ap_first_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_pwd_delete_tenant_second_active_host_1.current == []
         - task_pwd_delete_tenant_second_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_delete_tenant_second_active_host_1.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
         - task_pwd_add_tenant_second_active_host_1 is changed
         - task_pwd_add_tenant_second_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_second_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_pwd_add_ap_second_active_host_1 is changed
         - task_pwd_add_ap_second_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_ap_second_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_pwd_delete_tenant_last_active_host_1.current == []
         - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.5.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
         - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.11.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
         - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.17.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
         - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.23.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
         - task_pwd_delete_tenant_last_active_host_1.httpapi_logs.29.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
         - task_pwd_add_tenant_last_active_host_1 is changed
         - task_pwd_add_tenant_last_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_tenant_last_active_host_1.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_pwd_add_ap_last_active_host_1 is changed
         - task_pwd_add_ap_last_active_host_1.httpapi_logs.0.1 == "Setting credential authentication at task level"
         - task_pwd_add_ap_last_active_host_1.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_cert_delete_tenant_single_active_host_2 is changed
         - task_cert_delete_tenant_single_active_host_2.current == []
         - task_cert_delete_tenant_single_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_single_active_host_2 is changed
         - task_cert_add_tenant_single_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_single_active_host_2.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_cert_add_ap_single_active_host_2 is changed
         - task_cert_add_ap_single_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_ap_single_active_host_2.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_cert_delete_tenant_first_active_host_2 is changed
         - task_cert_delete_tenant_first_active_host_2.current == []
         - task_cert_delete_tenant_first_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_first_active_host_2 is changed
         - task_cert_add_tenant_first_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_first_active_host_2.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_cert_add_ap_first_active_host_2 is changed
         - task_cert_add_ap_first_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_ap_first_active_host_2.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_cert_delete_tenant_second_active_host_2 is changed
         - task_cert_delete_tenant_second_active_host_2.current == []
         - task_cert_delete_tenant_second_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_delete_tenant_second_active_host_2.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
         - task_cert_add_tenant_second_active_host_2 is changed
         - task_cert_add_tenant_second_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_second_active_host_2.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_cert_add_ap_second_active_host_2 is changed
         - task_cert_add_ap_second_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_ap_second_active_host_2.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - task_cert_delete_tenant_last_active_host_2 is changed
         - task_cert_delete_tenant_last_active_host_2.current == []
         - task_cert_delete_tenant_last_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_delete_tenant_last_active_host_2.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
         - task_cert_delete_tenant_last_active_host_2.httpapi_logs.8.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
         - task_cert_delete_tenant_last_active_host_2.httpapi_logs.13.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
         - task_cert_delete_tenant_last_active_host_2.httpapi_logs.18.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
         - task_cert_delete_tenant_last_active_host_2.httpapi_logs.23.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
         - task_cert_add_tenant_last_active_host_2 is changed
         - task_cert_add_tenant_last_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_tenant_last_active_host_2.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - task_cert_add_ap_last_active_host_2 is changed
         - task_cert_add_ap_last_active_host_2.httpapi_logs.0.1 == "Setting certificate authentication at task level"
         - task_cert_add_ap_last_active_host_2.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - inventory_pwd_delete_tenant_single_active_host_4 is changed
         - inventory_pwd_delete_tenant_single_active_host_4.current == []
         - inventory_pwd_delete_tenant_single_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_add_tenant_single_active_host_4 is changed
         - inventory_pwd_add_tenant_single_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_add_tenant_single_active_host_4.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - inventory_pwd_add_ap_single_active_host_4 is changed
         - inventory_pwd_add_ap_single_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_add_ap_single_active_host_4.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - inventory_pwd_delete_tenant_first_active_host_4 is changed
         - inventory_pwd_delete_tenant_first_active_host_4.current == []
         - inventory_pwd_delete_tenant_first_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_add_tenant_first_active_host_4 is changed
         - inventory_pwd_add_tenant_first_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_add_tenant_first_active_host_4.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - inventory_pwd_add_ap_first_active_host_4 is changed
         - inventory_pwd_add_ap_first_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_add_ap_first_active_host_4.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - inventory_pwd_delete_tenant_second_active_host_4 is changed
         - inventory_pwd_delete_tenant_second_active_host_4.current == []
         - inventory_pwd_delete_tenant_second_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_delete_tenant_second_active_host_4.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
         - inventory_pwd_add_tenant_second_active_host_4 is changed
         - inventory_pwd_add_tenant_second_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_add_tenant_second_active_host_4.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - inventory_pwd_add_ap_second_active_host_4 is changed
         - inventory_pwd_add_ap_second_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_add_ap_second_active_host_4.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"
         - inventory_pwd_delete_tenant_last_active_host_4 is changed
         - inventory_pwd_delete_tenant_last_active_host_4.current == []
         - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.3.1 == "Switching host from 124.145.225.187 to 89.208.146.34"
         - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.8.1 == "Switching host from 89.208.146.34 to 128.228.131.123"
         - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.13.1 == "Switching host from 128.228.131.123 to 100.139.68.211"
         - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.18.1 == "Switching host from 100.139.68.211 to 124.145.225.187"
         - inventory_pwd_delete_tenant_last_active_host_4.httpapi_logs.23.1 == "Switching host from 124.145.225.187 to 173.36.219.72"
         - inventory_pwd_add_tenant_last_active_host_4 is changed
         - inventory_pwd_add_tenant_last_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_add_tenant_last_active_host_4.current.0.fvTenant.attributes.dn == "uni/tn-ansible_test"
         - inventory_pwd_add_ap_last_active_host_4 is changed
         - inventory_pwd_add_ap_last_active_host_4.httpapi_logs.0.1 == "Setting certificate authentication from inventory"
         - inventory_pwd_add_ap_last_active_host_4.current.0.fvAp.attributes.dn == "uni/tn-ansible_test/ap-ap"

# Invalid session_key
     - name: Set host 7
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 173.36.219.72
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_httpapi_session_key: {'ansible_github_ci': '{{ role_path }}/tasks/certs/admin_invalid.key'}
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant via inventory host
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       ignore_errors: yes

# Non existing session_key
     - name: Set host 8
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 173.36.219.72
        ansible_user: "{{ ansible_user }}"
        ansible_password: "{{ ansible_password }}"
        ansible_httpapi_session_key: {'ansible_github_ci': '{{ role_path }}/tasks/certs/non_existing.key'}
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant via inventory host
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       ignore_errors: yes

# Incorrect Password
     - name: Set host 9
       ansible.builtin.add_host:
        name: inventory_hosts
        ansible_host: 173.36.219.72
        ansible_user: "{{ ansible_user }}"
        ansible_password: "incorrect_password"
        ansible_command_timeout: 5
        ansible_connection: "{{ ansible_connection }}"
        ansible_network_os: "{{ ansible_network_os }}"
        ansible_httpapi_validate_certs: "{{ ansible_httpapi_validate_certs }}"
        ansible_httpapi_use_ssl: "{{ ansible_httpapi_use_ssl }}"
        ansible_httpapi_use_proxy: "{{ ansible_httpapi_use_proxy }}"

     - name: Delete Tenant with incorrect password
       cisco.aci.aci_tenant:
        output_level: debug
        tenant: ansible_test
        state: absent
       ignore_errors: yes

# Clean up Environment
     - name: Delete a tenant using an XML string
       cisco.aci.aci_rest:
          <<: *aci_info_single_host_active
          path: /api/mo/uni/tn-[Sales].xml
          method: delete
          content: '<fvTenant name="Sales" descr="Sales departement"/>'
       ignore_errors: yes

     - name: Remove user certificate
       cisco.aci.aci_aaa_user_certificate: 
        <<: *aci_info_single_host_active
        aaa_user: "{{ ansible_user }}"
        name: admin
        certificate: "{{ lookup('file', 'certs/admin.crt') }}"
        state: absent
       ignore_errors: yes

     - name: Delete Tenant 
       cisco.aci.aci_tenant:
        <<: *aci_info_single_host_active
        tenant: ansible_test
        state: absent
       ignore_errors: yes
